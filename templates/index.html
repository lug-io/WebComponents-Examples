<!DOCTYPE html>
<html>
	<head>
		<title>Templates</title>

		<!-- Polyfills for WebComponents Support -->
		<script type="text/javascript" src="../bower_components/webcomponentsjs/webcomponents.js"></script>
		<!-- Polymer for "Abstraction" comparisons -->
		<link rel="import" href="../bower_components/polymer/polymer.html"><!-- Note HTML Import -->
		<!-- For easier DOM manipulation -->
		<script type="text/javascript" src="../node_modules/jquery/dist/jquery.js"></script>

		<script>

			// CHECK SUPPORT
			function supportsTemplate() {
				return 'content' in document.createElement('template');
			}
			
			// ADD ROW
			function addRow(){

				// Grab our template
				var t = document.querySelector('template#table-row').content;

				// Optional -- Modify template
				var form = document.querySelector('#data-binding-form');

				var age = form.querySelector("#age-field").value; 		//var age = $("#data-binding-form #age-field"); // Equiv
				var name = form.querySelector("#name-field").value;
				var gender = form.querySelector("#gender-field").value;

				t.querySelectorAll("td:first-child")[0].innerHTML = name;
				t.querySelectorAll("td:nth-child(2)")[0].innerHTML = age;
				t.querySelectorAll("td:last-child")[0].innerHTML = gender;


				// Clone/activate template & add to page
				var clone = document.importNode(t, true);
				$("#persons-table tr:last").after(clone);

				return false;
			}


		$(function(){
			if (supportsTemplate()) {
			 	console.log("Good to go!");
			} else {
				console.log("Use old templating techniques or libraries.");
			}

		});
		</script>
	</head>
	<body>
		<h1>Templates</h1>
		

		<h2>Simple Template</h2>
		<template id="simple">
			<span>Hi!</span>
		</template>


		<h2>"Data Binding"</h2>
		<form id="data-binding-form" onsubmit="return addRow()">

			<label for="name-field">Name:</label>
			<input type="text" name="name" id="name-field" />
		
			<label for="age-field">Age:</label>
			<input type="text" name="age" id="age-field" />

			<label for="gender-field">Gender:</label>
			<input type="text" name="gender" id="gender-field" />

			 <input type="submit" name="Submit" value="Submit"/>
		</form>

		<table id="persons-table">
		<thead>
			<tr>
				<th>Name</th>
				<th>Age</th>
				<th>Gender</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Chester Examplefield</td>
				<td>92</td>
				<td>Female</td>
			</tr>
			<template id="table-row">
			<tr>
				<td>1</td>
				<td>2</td>
				<td>3</td>
			</tr>
			</template>
		</tbody>
		</table>

	</body>
</html>
